{"ast":null,"code":"// utils/voice.js\n\nexport function speakWithAudioFeedback(text, setVolume, onEnd) {\n  const synth = window.speechSynthesis;\n  if (!synth) return;\n  synth.cancel(); // stop anything that's already speaking\n\n  const utter = new SpeechSynthesisUtterance(text);\n  utter.lang = 'en-US';\n  utter.pitch = 1;\n  utter.rate = 1;\n  utter.onstart = () => {\n    const interval = setInterval(() => {\n      const vol = Math.random(); // simulate mouth volume\n      setVolume(vol);\n    }, 100);\n    utter.onend = () => {\n      clearInterval(interval);\n      setVolume(0);\n      if (onEnd) onEnd();\n    };\n  };\n  synth.speak(utter);\n}\n\n// ✅ Export the stopSpeaking function\nexport function stopSpeaking() {\n  const synth = window.speechSynthesis;\n  if (synth) {\n    synth.cancel(); // stops the voice output\n  }\n}","map":{"version":3,"names":["speakWithAudioFeedback","text","setVolume","onEnd","synth","window","speechSynthesis","cancel","utter","SpeechSynthesisUtterance","lang","pitch","rate","onstart","interval","setInterval","vol","Math","random","onend","clearInterval","speak","stopSpeaking"],"sources":["H:/camera/project_root/frontend/src/utils/voice.js"],"sourcesContent":["// utils/voice.js\r\n\r\nexport function speakWithAudioFeedback(text, setVolume, onEnd) {\r\n  const synth = window.speechSynthesis;\r\n  if (!synth) return;\r\n\r\n  synth.cancel(); // stop anything that's already speaking\r\n\r\n  const utter = new SpeechSynthesisUtterance(text);\r\n  utter.lang = 'en-US';\r\n  utter.pitch = 1;\r\n  utter.rate = 1;\r\n\r\n  utter.onstart = () => {\r\n    const interval = setInterval(() => {\r\n      const vol = Math.random(); // simulate mouth volume\r\n      setVolume(vol);\r\n    }, 100);\r\n\r\n    utter.onend = () => {\r\n      clearInterval(interval);\r\n      setVolume(0);\r\n      if (onEnd) onEnd();\r\n    };\r\n  };\r\n\r\n  synth.speak(utter);\r\n}\r\n\r\n// ✅ Export the stopSpeaking function\r\nexport function stopSpeaking() {\r\n  const synth = window.speechSynthesis;\r\n  if (synth) {\r\n    synth.cancel(); // stops the voice output\r\n  }\r\n}\r\n"],"mappings":"AAAA;;AAEA,OAAO,SAASA,sBAAsBA,CAACC,IAAI,EAAEC,SAAS,EAAEC,KAAK,EAAE;EAC7D,MAAMC,KAAK,GAAGC,MAAM,CAACC,eAAe;EACpC,IAAI,CAACF,KAAK,EAAE;EAEZA,KAAK,CAACG,MAAM,CAAC,CAAC,CAAC,CAAC;;EAEhB,MAAMC,KAAK,GAAG,IAAIC,wBAAwB,CAACR,IAAI,CAAC;EAChDO,KAAK,CAACE,IAAI,GAAG,OAAO;EACpBF,KAAK,CAACG,KAAK,GAAG,CAAC;EACfH,KAAK,CAACI,IAAI,GAAG,CAAC;EAEdJ,KAAK,CAACK,OAAO,GAAG,MAAM;IACpB,MAAMC,QAAQ,GAAGC,WAAW,CAAC,MAAM;MACjC,MAAMC,GAAG,GAAGC,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;MAC3BhB,SAAS,CAACc,GAAG,CAAC;IAChB,CAAC,EAAE,GAAG,CAAC;IAEPR,KAAK,CAACW,KAAK,GAAG,MAAM;MAClBC,aAAa,CAACN,QAAQ,CAAC;MACvBZ,SAAS,CAAC,CAAC,CAAC;MACZ,IAAIC,KAAK,EAAEA,KAAK,CAAC,CAAC;IACpB,CAAC;EACH,CAAC;EAEDC,KAAK,CAACiB,KAAK,CAACb,KAAK,CAAC;AACpB;;AAEA;AACA,OAAO,SAASc,YAAYA,CAAA,EAAG;EAC7B,MAAMlB,KAAK,GAAGC,MAAM,CAACC,eAAe;EACpC,IAAIF,KAAK,EAAE;IACTA,KAAK,CAACG,MAAM,CAAC,CAAC,CAAC,CAAC;EAClB;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}