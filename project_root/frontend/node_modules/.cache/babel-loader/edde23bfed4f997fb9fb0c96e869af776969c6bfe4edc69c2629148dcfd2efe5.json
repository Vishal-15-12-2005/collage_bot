{"ast":null,"code":"var _jsxFileName = \"H:\\\\camera\\\\project_root\\\\frontend\\\\src\\\\pages\\\\RobotController.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { FiCpu, FiMic } from 'react-icons/fi';\nimport API from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RobotController() {\n  _s();\n  const videoRef = useRef(null);\n  const [recognizedName, setRecognizedName] = useState('');\n  const [collegeName, setCollegeName] = useState('');\n  const [robotMessage, setRobotMessage] = useState('');\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  useEffect(() => {\n    fetchCollegeName();\n    const interval = setInterval(fetchRecognition, 1500);\n    return () => clearInterval(interval);\n  }, []);\n  const fetchCollegeName = async () => {\n    try {\n      const res = await API.get('/college_info');\n      const info = res.data && res.data.length > 0 ? res.data[0] : null;\n      setCollegeName(info ? info.content : 'Your College');\n    } catch (error) {\n      setCollegeName('Error: Could not load college name');\n      console.error('Failed to load college name', error);\n    }\n  };\n  const fetchRecognition = async () => {\n    try {\n      const res = await API.get('/recognized_face');\n      const {\n        name\n      } = res.data;\n      if (name && name !== recognizedName && name !== 'Unknown' && name !== 'No face') {\n        setRecognizedName(name);\n        const message = `Hi ${name}, I am the robot assistant of ${collegeName}. How can I help you today?`;\n        speak(message);\n        setRobotMessage(message);\n        logChat(name, message);\n      } else if (name === 'Unknown') {\n        setRecognizedName('');\n        setRobotMessage('');\n      }\n    } catch (err) {\n      setRobotMessage('Error: Unable to connect to backend.');\n      setRecognizedName('');\n      console.error('Recognition fetch failed:', err);\n    }\n  };\n  const speak = text => {\n    const synth = window.speechSynthesis;\n    const utterance = new window.SpeechSynthesisUtterance(text);\n    utterance.lang = 'en-US';\n    synth.speak(utterance);\n    setIsSpeaking(true);\n    utterance.onend = () => setIsSpeaking(false);\n  };\n  const logChat = async (user, msg) => {\n    try {\n      await API.post('/chatlog', {\n        sender: 'robot',\n        receiver: user,\n        message: msg\n      });\n    } catch (err) {\n      console.error('Failed to log chat:', err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6 fade-in max-w-5xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"glass-card p-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white\",\n          children: /*#__PURE__*/_jsxDEV(FiCpu, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold gradient-text\",\n            children: \"Robot Assistant Interface\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 dark:text-gray-300\",\n            children: \"Simulated robot behavior with voice and vision\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-2 gap-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-card overflow-hidden relative\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          ref: videoRef,\n          src: \"http://localhost:5000/video_feed\",\n          alt: \"Robot Camera\",\n          className: \"w-full h-auto rounded-xl\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"glass-card p-6 flex flex-col justify-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-bold mb-4 flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(FiMic, {\n              className: \"mr-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this), \" Robot Canvas Display\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-800 dark:text-gray-200 whitespace-pre-wrap\",\n            children: robotMessage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 text-sm text-gray-600 dark:text-gray-300\",\n          children: [\"College: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-semibold\",\n            children: collegeName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n_s(RobotController, \"RGg9E2qG1LfbdgCN8B1t1h2Fc8w=\");\n_c = RobotController;\nvar _c;\n$RefreshReg$(_c, \"RobotController\");","map":{"version":3,"names":["React","useEffect","useRef","useState","FiCpu","FiMic","API","jsxDEV","_jsxDEV","RobotController","_s","videoRef","recognizedName","setRecognizedName","collegeName","setCollegeName","robotMessage","setRobotMessage","isSpeaking","setIsSpeaking","fetchCollegeName","interval","setInterval","fetchRecognition","clearInterval","res","get","info","data","length","content","error","console","name","message","speak","logChat","err","text","synth","window","speechSynthesis","utterance","SpeechSynthesisUtterance","lang","onend","user","msg","post","sender","receiver","className","children","size","fileName","_jsxFileName","lineNumber","columnNumber","ref","src","alt","_c","$RefreshReg$"],"sources":["H:/camera/project_root/frontend/src/pages/RobotController.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport { FiCpu, FiMic } from 'react-icons/fi';\r\nimport API from '../utils/api';\r\n\r\nexport default function RobotController() {\r\n  const videoRef = useRef(null);\r\n  const [recognizedName, setRecognizedName] = useState('');\r\n  const [collegeName, setCollegeName] = useState('');\r\n  const [robotMessage, setRobotMessage] = useState('');\r\n  const [isSpeaking, setIsSpeaking] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCollegeName();\r\n    const interval = setInterval(fetchRecognition, 1500);\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const fetchCollegeName = async () => {\r\n    try {\r\n      const res = await API.get('/college_info');\r\n      const info = res.data && res.data.length > 0 ? res.data[0] : null;\r\n      setCollegeName(info ? info.content : 'Your College');\r\n    } catch (error) {\r\n      setCollegeName('Error: Could not load college name');\r\n      console.error('Failed to load college name', error);\r\n    }\r\n  };\r\n\r\n  const fetchRecognition = async () => {\r\n    try {\r\n      const res = await API.get('/recognized_face');\r\n      const { name } = res.data;\r\n      if (name && name !== recognizedName && name !== 'Unknown' && name !== 'No face') {\r\n        setRecognizedName(name);\r\n        const message = `Hi ${name}, I am the robot assistant of ${collegeName}. How can I help you today?`;\r\n        speak(message);\r\n        setRobotMessage(message);\r\n        logChat(name, message);\r\n      } else if (name === 'Unknown') {\r\n        setRecognizedName('');\r\n        setRobotMessage('');\r\n      }\r\n    } catch (err) {\r\n      setRobotMessage('Error: Unable to connect to backend.');\r\n      setRecognizedName('');\r\n      console.error('Recognition fetch failed:', err);\r\n    }\r\n  };\r\n\r\n  const speak = (text) => {\r\n    const synth = window.speechSynthesis;\r\n    const utterance = new window.SpeechSynthesisUtterance(text);\r\n    utterance.lang = 'en-US';\r\n    synth.speak(utterance);\r\n    setIsSpeaking(true);\r\n    utterance.onend = () => setIsSpeaking(false);\r\n  };\r\n\r\n  const logChat = async (user, msg) => {\r\n    try {\r\n      await API.post('/chatlog', {\r\n        sender: 'robot',\r\n        receiver: user,\r\n        message: msg,\r\n      });\r\n    } catch (err) {\r\n      console.error('Failed to log chat:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6 fade-in max-w-5xl mx-auto\">\r\n      <div className=\"glass-card p-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"p-3 rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white\">\r\n            <FiCpu size={24} />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold gradient-text\">Robot Assistant Interface</h1>\r\n            <p className=\"text-gray-600 dark:text-gray-300\">Simulated robot behavior with voice and vision</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        {/* Video Feed */}\r\n        <div className=\"glass-card overflow-hidden relative\">\r\n          <img\r\n            ref={videoRef}\r\n            src=\"http://localhost:5000/video_feed\"\r\n            alt=\"Robot Camera\"\r\n            className=\"w-full h-auto rounded-xl\"\r\n          />\r\n        </div>\r\n\r\n        {/* Robot Display */}\r\n        <div className=\"glass-card p-6 flex flex-col justify-between\">\r\n          <div>\r\n            <h2 className=\"text-xl font-bold mb-4 flex items-center\">\r\n              <FiMic className=\"mr-2\" /> Robot Canvas Display\r\n            </h2>\r\n            <div className=\"text-gray-800 dark:text-gray-200 whitespace-pre-wrap\">{robotMessage}</div>\r\n          </div>\r\n          <div className=\"mt-4 text-sm text-gray-600 dark:text-gray-300\">\r\n            College: <span className=\"font-semibold\">{collegeName}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}